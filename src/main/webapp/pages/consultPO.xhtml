<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:c="http://java.sun.com/jstl/core"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
    <ui:composition template="../templates/layout.xhtml">
      <ui:define name="content">
        <h:form prependId="false" id="growlForm">
          <p:growl id="growl" showDetail="false" />
        </h:form>
    	<h:form prependId="false" id="dataForm">
    		<p:panel id="data" toggleable="true" toggleSpeed="250">
    			<h:outputText value="#{app.label_client}" />
    			<h:selectOneMenu id="clientSelect" value="#{dossierMB.client}" required="false">
                	<f:selectItem itemLabel="#{messages.select_message}" itemValue="" />
                	<f:selectItems value="#{dossierMB.clients}" var="client"
                            itemValue="#{client}" itemLabel="#{client.name}"/>
                    <f:converter converterId="co.qcsc.spatha.web.mb.converter.ClientConverter"/>
            	</h:selectOneMenu>
                <p:commandButton id="consultPOButton" value="#{messages.label_consult}"
                        action="#{dossierMB.findPurchaseOrders}" ajax="false"/>
            </p:panel>
        </h:form>
        
        <p:panel id="poData" toggleable="true" toggleSpeed="250">
            <h:form prependId="false" id="poForm">
    			<p:dataTable id="poList" value="#{dossierMB.purchaseOrders}"
        				var="purchaseOrder"
        				resizableColumns="false" paginator="true"
        				paginatorTemplate=" {CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
        				rowsPerPageTemplate="5,10,25,50" rows="10">
    				<p:column>
    					<f:facet name="header">
    						<h:outputText value="#{app.label_purchaseOrder_number}" />
    					</f:facet>
                        <h:outputText value="#{purchaseOrder.numberOrder}"/>
    				</p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="#{app.label_purchaseOrder_supplier}" />
                        </f:facet>
                        <h:outputText value="#{purchaseOrder.supplier.name}"/>
                    </p:column>
                    <p:column styleClass="action-column">
                        <f:facet name="header">
                            <h:outputText value="Actions" />
                        </f:facet>
                        <p:commandButton id="viewButton" icon="ui-icon-zoomin"
                                title="#{messages.label_view}" ajax="false" action="#{dossierMB.viewPO}">
                        </p:commandButton>
                        <p:tooltip for="viewButton" value="#{messages.label_view}"
                            showEffect="fade" hideEffect="fade" />
                        <p:commandButton id="indexButton" icon="ui-icon-zoomin"
                                title="#{app.label_dossier_idx}" ajax="false" action="#{dossierMB.viewIndex}">
                        </p:commandButton>
                        <p:tooltip for="indexButton" value="#{app.label_dossier_idx}"
                                showEffect="fade" hideEffect="fade" />
                    </p:column>
    			</p:dataTable>
            </h:form>
        </p:panel>
      </ui:define>
    </ui:composition>
</html>